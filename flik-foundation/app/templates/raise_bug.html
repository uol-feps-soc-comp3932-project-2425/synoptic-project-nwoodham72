{% extends "base.html" %}

{% block title %}Report Bug - Flik{% endblock %}

{% block content %}
    <h1 class="mb-3">Report a Bug</h1>
    <p class="text-muted">Please provide details about the issue you encountered.</p>

    {% if bug_details %}
    <div class="alert alert-success shadow-sm">
        <h5 class="alert-heading">ðŸŽ‰ Bug Reported Successfully!</h5>
        <strong>Title:</strong> {{ bug_details.title }}<br>
        <strong>Given:</strong> {{ bug_details.given }}<br>
        <strong>When:</strong> {{ bug_details.when }}<br>
        <strong>Then:</strong> {{ bug_details.then }}<br>
        <strong>Expected:</strong> {{ bug_details.expected }}<br>
        <strong>Actual:</strong> {{ bug_details.actual }}
    </div>
    {% endif %}

    <div class="card shadow-sm border-0 rounded-3">
        <div class="card-body">
            <form method="POST">
                {{ form.hidden_tag() }}
                <!-- Multi-Step Form Container -->
                <div class="form-steps-container">
                    <div class="form-steps-inner" id="formStepsInner">

                        <!-- Step 1 -->
                        <div class="form-step" id="step1">
                            <div class="mb-3">
                                {{ form.title.label(class="form-label") }}
                                {{ form.title(class="form-control", placeholder="Give your bug a title") }}
                            </div>
                            <div class="mb-3">
                                {{ form.given.label(class="form-label") }}
                                {{ form.given(class="form-control", placeholder="What is your role or where does this bug occur?", rows=4) }}
                            </div>
                            <div class="mb-3">
                                {{ form.when.label(class="form-label") }}
                                {{ form.when(class="form-control", placeholder="What are you trying to do?", rows=4) }}
                            </div>
                            <div class="mb-3">
                                {{ form.then.label(class="form-label") }}
                                {{ form.then(class="form-control", placeholder="What happens?", rows=4) }}
                            </div>
                            <div class="d-grid">
                                <button type="button" class="btn btn-primary" onclick="nextStep()">Next</button>
                            </div>
                        </div>

                        <!-- Step 2 -->
                        <div class="form-step" id="step2">
                            <div class="mb-3">
                                {{ form.expected.label(class="form-label") }}
                                {{ form.expected(class="form-control", placeholder="What should have happened instead?", rows=4) }}
                            </div>
                            <div class="mb-3">
                                {{ form.actual.label(class="form-label") }}
                                {{ form.actual(class="form-control", placeholder="What actually happened?", rows=4) }}
                            </div>
                            <div class="d-flex justify-content-between">
                                <button type="button" class="btn btn-secondary" onclick="prevStep()">Previous</button>
                                <button type="submit" class="btn btn-primary">Submit Bug</button>
                            </div>
                        </div>

                    </div> <!-- /.form-steps-inner -->
                </div> <!-- /.form-steps-container -->
            </form>
        </div>
    </div>

    <!-- Multi-Step Form Navigation -->
    <script>
        function nextStep() {
            document.getElementById('formStepsInner').style.transform = 'translateX(-50%)';
        }
        function prevStep() {
            document.getElementById('formStepsInner').style.transform = 'translateX(0)';
        }
    </script>
{% endblock %}
